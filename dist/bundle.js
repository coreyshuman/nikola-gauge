(()=>{"use strict";var i={446:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;class e{constructor(i,t,e){this.interval=i,this.handle=-1,this.eventHandler=null!=t?t:null,this.Enabled=t&&e,console.log("timer "+i+" "+this.enabled)}get Interval(){return this.interval}set Interval(i){this.interval=i}get Enabled(){return this.enabled}set Enabled(i){this.enabled=i,i?this.startTimer():this.endTimer()}set EventHandler(i){this.eventHandler=i}startTimer(){this.handle>0&&this.endTimer(),null!==this.eventHandler&&(this.handle=window.setInterval(this.eventHandler,this.interval))}endTimer(){this.handle>0&&(window.clearInterval(this.handle),this.handle=-1)}static getTicks(){return Date.now()}static getTicksDiff(i){return Date.now()-i}}t.Timer=e,t.default=e},652:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tuple=void 0;class e{constructor(i,t){this.v1=i,this.v2=t}}t.Tuple=e,t.default=e},628:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0,t.Util=class{static d2r(i){return i*Math.PI/180}}},943:(i,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Context2DDriver=void 0;const a=e(628);t.Context2DDriver=class{constructor(i,t,e){this.ctx=i,this.width=t,this.height=e,this.ctx.translate(.5,.5)}fillCanvas(i){const t=i.radial?this.ctx.createRadialGradient(i.x0,i.y0,i.r0,i.x1,i.y1,i.r1):this.ctx.createLinearGradient(i.x0,i.y0,i.x1,i.y1);i.colorStops.forEach((i=>{t.addColorStop(i.offset,i.color)})),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}drawLine(i,t,e,a,n,r){this.ctx.beginPath(),this.ctx.strokeStyle=n,this.ctx.fillStyle=n,this.ctx.lineWidth=r,this.ctx.globalAlpha=1,this.ctx.moveTo(i,t),this.ctx.lineTo(e,a),this.ctx.stroke()}drawArc(i,t,e,n,r,h,s){this.ctx.beginPath(),this.ctx.strokeStyle=h,this.ctx.fillStyle=h,this.ctx.lineWidth=s,this.ctx.arc(i,t,e,a.Util.d2r(n),a.Util.d2r(r),!1),this.ctx.stroke()}writeText(i,t,e,a,n){this.ctx.strokeStyle=a,this.ctx.fillStyle=a,this.ctx.font=`${e.weight} ${e.fontsize} ${e.typename}`,this.ctx.fillText(n,i,t)}}},344:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Font=void 0,t.Font=class{constructor(i,t,e="normal"){this.typename=i,this.fontsize=t,this.weight=e}}},319:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=void 0,t.Canvas=class{constructor(i){this.driver=i}get width(){return this.driver.width}get height(){return this.driver.height}fillCanvas(i){this.driver.fillCanvas(i)}drawLine(i,t,e,a,n,r){this.driver.drawLine(i,t,e,a,n,r)}drawArc(i,t,e,a,n,r,h){this.driver.drawArc(Math.round(i),Math.round(t),Math.ceil(e),a,n,r,Math.ceil(h))}writeText(i,t,e,a,n){this.driver.writeText(i,t,e,a,n)}}},86:(i,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=e(528),n=e(344),r=e(652),h=e(628),s=e(319),l=e(446);class u{constructor(i){this.canvas=new s.Canvas(i),this.ringGraphDisplayedValue=0,this.value=0,this.lastValueUpdateTick=l.Timer.getTicks(),this.minimum=0,this.maximum=200,this.targetMinimum=90,this.targetMaximum=110,this.ringGraphValueIncrementInterval=1,this.ringGraphAnimationTimer=new l.Timer(15),this.ringGraphAnimationTimer.EventHandler=this.ringGraphAnimationEventHandler.bind(this),this.gradient=new a.LinearGradient(0,this.canvas.height,this.canvas.width,0),this.gradient.addColorStop(0,u.BackColor1),this.gradient.addColorStop(.8,u.BackColor2),this.font=new n.Font("Arial",`${Math.ceil(12*this.canvas.width/260)}px`,"lighter"),this.ringGraphAngleRange=new r.Tuple(-145,55),this.ringGraphLabelCount=5,this.ringGraphOrigin=new r.Tuple(.4*this.canvas.width,.55*this.canvas.height),this.ringGraphRadius=.4*this.canvas.width,this.ringGraphUnitLabel="Watts",this.lineGraphOrigin=new r.Tuple(.1*this.canvas.width,.55*this.canvas.height),this.lineGraphLength=.6*this.canvas.width,this.lineGraphThickness=1,this.lineGraphMaxHeight=.2*this.canvas.height,this.lineGraphMaxMagnitude=(this.maximum-this.minimum)/2,this.lineGraphCenterValue=this.maximum-(this.maximum-this.minimum)/2,this.lineGraphUpdateInterval=2e3,this.lineGraphUpdateTimer=new l.Timer(this.lineGraphUpdateInterval),this.lineGraphUpdateTimer.EventHandler=this.lineGraphUpdateEventHandler.bind(this),this.lineGraphUpdateTimer.Enabled=!0,this.lineGraphValue=0,this.lineGraphDisplayValueCount=Math.round(this.lineGraphLength),this.lineGraphDisplayValues=[],this.draw()}get BackgroundGradient(){return this.gradient}set BackgroundGradient(i){this.gradient=i}get Font(){return this.font}set Font(i){this.font=i}set Label(i){this.ringGraphUnitLabel=i}get RingGraphUnitLabel(){return this.ringGraphUnitLabel}set RingGraphUnitLabel(i){this.ringGraphUnitLabel=i}get Value(){return this.value}set Value(i){this.updateLineGraphAverageValue(),this.value=i,this.ringGraphAnimationTimer.Enabled=!0}get Minimum(){return this.minimum}set Minimum(i){this.minimum=i,this.ringGraphAnimationTimer.Enabled=!0}get Maximum(){return this.maximum}set Maximum(i){this.maximum=i,this.ringGraphAnimationTimer.Enabled=!0}get TargetMinimum(){return this.targetMinimum}set TargetMinimum(i){this.targetMinimum=i,this.ringGraphAnimationTimer.Enabled=!0}get TargetMaximum(){return this.targetMaximum}set TargetMaximum(i){this.targetMaximum=i,this.ringGraphAnimationTimer.Enabled=!0}get MaximumMagnutide(){return this.lineGraphMaxMagnitude}set MaximumMagnutide(i){this.lineGraphMaxMagnitude=i,this.ringGraphAnimationTimer.Enabled=!0}get CenterValue(){return this.lineGraphCenterValue}set CenterValue(i){this.lineGraphCenterValue=i,this.ringGraphAnimationTimer.Enabled=!0}ringGraphAnimationEventHandler(){this.updateRingGraph(),this.draw()}lineGraphUpdateEventHandler(){this.updateLineGraph(),this.draw()}updateLineGraphAverageValue(){this.lineGraphValue+=this.value*l.Timer.getTicksDiff(this.lastValueUpdateTick),this.lastValueUpdateTick=l.Timer.getTicks()}clearLineGraphAverageValue(){this.lineGraphValue=0,this.lastValueUpdateTick=l.Timer.getTicks()}updateLineGraph(){this.updateLineGraphAverageValue(),this.lineGraphDisplayValues.unshift(this.lineGraphValue/this.lineGraphUpdateInterval),this.clearLineGraphAverageValue(),this.lineGraphDisplayValues.length>this.lineGraphDisplayValueCount&&this.lineGraphDisplayValues.pop()}updateRingGraph(){if(this.value=u.getBoundValue(new r.Tuple(this.minimum,this.maximum),this.value),this.ringGraphDisplayedValue!=this.value){let i=this.value<this.ringGraphDisplayedValue?-1:1,t=this.ringGraphValueIncrementInterval*i;this.ringGraphDisplayedValue+=t}else this.ringGraphAnimationTimer.Enabled=!1;(this.ringGraphDisplayedValue<this.minimum||this.ringGraphDisplayedValue>this.maximum)&&(this.ringGraphDisplayedValue=this.value),Math.abs(this.ringGraphDisplayedValue-this.value)<this.ringGraphValueIncrementInterval&&(this.ringGraphDisplayedValue=this.value)}draw(){this.clear(),this.drawCircleMeter(),this.drawLineGraph()}clear(){this.canvas.fillCanvas(this.gradient)}drawCircleMeter(){const i=u.getNearest10th(this.minimum),t=u.getRingLabelIncrement(new r.Tuple(this.minimum,this.maximum),this.ringGraphLabelCount),e=(this.ringGraphAngleRange.v2-this.ringGraphAngleRange.v1)/this.ringGraphLabelCount,a=u.getAngleFromValue(this.ringGraphAngleRange,new r.Tuple(this.minimum,this.maximum),this.ringGraphDisplayedValue),n=u.getRingColor(new r.Tuple(this.targetMinimum,this.targetMaximum),this.ringGraphDisplayedValue),h=u.getAngleFromValue(this.ringGraphAngleRange,new r.Tuple(this.minimum,this.maximum),this.targetMaximum),s=u.getAngleFromValue(this.ringGraphAngleRange,new r.Tuple(this.minimum,this.maximum),this.targetMinimum);this.canvas.drawArc(this.ringGraphOrigin.v1,this.ringGraphOrigin.v2,this.ringGraphRadius,h,s,u.TargetColor,this.canvas.width*(9/260)),this.canvas.drawArc(this.ringGraphOrigin.v1,this.ringGraphOrigin.v2,this.ringGraphRadius,this.ringGraphAngleRange.v1,this.ringGraphAngleRange.v2,n,this.canvas.width*(5/260)),this.canvas.drawArc(this.ringGraphOrigin.v1,this.ringGraphOrigin.v2,this.ringGraphRadius,this.ringGraphAngleRange.v1,a,"#000",this.canvas.width*(3/260)),this.canvas.writeText(.82*this.canvas.width,.9*this.canvas.height,this.font,u.TextColor,this.ringGraphUnitLabel);for(let a=0;a<this.ringGraphLabelCount;a++){const n=(i+t*a).toString(),r=u.getRingLabelLocation(this.ringGraphOrigin,1.125*this.ringGraphRadius,this.ringGraphAngleRange.v2-e*a);this.canvas.writeText(r.v1,r.v2,this.font,u.TextColor,n)}}drawLineGraph(){this.canvas.drawLine(this.lineGraphOrigin.v1,this.lineGraphOrigin.v2,this.lineGraphOrigin.v1+this.lineGraphLength,this.lineGraphOrigin.v2,u.LineColor,this.lineGraphThickness);let i=null;this.lineGraphDisplayValues.forEach(((t,e)=>{const a=this.lineGraphOrigin.v1+this.lineGraphLength-e;t=u.getBoundValue(new r.Tuple(this.lineGraphCenterValue-this.lineGraphMaxMagnitude,this.lineGraphCenterValue+this.lineGraphMaxMagnitude),t);const n=u.getLineOffsetFromValue(this.lineGraphMaxHeight,this.lineGraphMaxMagnitude,this.lineGraphCenterValue,t),h=this.lineGraphOrigin.v2-n;if(null!==i){const e=t>this.targetMaximum||t<this.targetMinimum?u.RedColor:u.GreenColor;this.canvas.drawLine(a,this.lineGraphOrigin.v2,a,h,e,1),this.canvas.drawLine(i.v1,i.v2,a,h,u.LineColor,this.lineGraphThickness)}i=new r.Tuple(a,h)}));const t=u.getLineOffsetFromValue(this.lineGraphMaxHeight,this.lineGraphMaxMagnitude,this.lineGraphCenterValue,this.targetMaximum),e=u.getLineOffsetFromValue(this.lineGraphMaxHeight,this.lineGraphMaxMagnitude,this.lineGraphCenterValue,this.targetMinimum);this.canvas.drawLine(this.lineGraphOrigin.v1,this.lineGraphOrigin.v2+t,this.lineGraphOrigin.v1+this.lineGraphLength,this.lineGraphOrigin.v2+t,u.TargetColor,1),this.canvas.drawLine(this.lineGraphOrigin.v1,this.lineGraphOrigin.v2+e,this.lineGraphOrigin.v1+this.lineGraphLength,this.lineGraphOrigin.v2+e,u.TargetColor,1)}static getBoundValue(i,t){return t>i.v2?i.v2:t<i.v1?i.v1:t}static getLineOffsetFromValue(i,t,e,a){return i/t*(a-e)}static getAngleFromValue(i,t,e){return(t.v2-e)*(i.v2-i.v1)/(t.v2-t.v1)+i.v1}static getRingColor(i,t){i.v2,i.v1;let e=u.RingGraphColor;return t<i.v1?e=u.RedColor:t>i.v2&&(e=u.GreenColor),e}static getRingLabelLocation(i,t,e){const a=t*Math.cos(h.Util.d2r(e))+i.v1,n=t*Math.sin(h.Util.d2r(e))+i.v2;return new r.Tuple(a,n)}static getRingLabelIncrement(i,t){let e=(i.v2-i.v1)/t;return e=u.getNearest10th(e),e}static getNearest10th(i){return 10*Math.round(i/10)}}t.default=u,u.RingGraphColor="#fe9440",u.TextColor="#eeeeee",u.BackColor1="#fe5c00",u.BackColor2="#000000",u.LineColor="#fe9440",u.GreenColor="#5a9132",u.RedColor="#a32c08",u.TargetColor="#eeeeee"},528:(i,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStop=t.LinearGradient=void 0,t.LinearGradient=class{constructor(i,t,e,a){this.x0=i,this.y0=t,this.x1=e,this.y1=a,this.radial=!1,this.colorStops=new Array}addColorStop(i,t){this.colorStops.push(new e(i,t))}};class e{constructor(i,t){this.offset=i,this.color=t,this.offset<0&&(i=0,console.warn("Offset cannot be less than 0. Defaulting to 0.")),this.offset>1&&(i=1,console.warn("Offset cannot be greater than 1. Defaulting to 1."))}}t.ColorStop=e}},t={};function e(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return i[a](r,r.exports,e),r.exports}(()=>{const i=e(86),t=e(652),a=e(446),n=e(943),r=[],h=[new t.default(0,400),new t.default(0,200)],s=[new t.default(100,150),new t.default(60,110)],l=[125,85],u=["Watts","°C"];for(let t=1;t<=2;t++){const e=document.getElementById("canvas"+t),a=e.getContext("2d"),g=new i.default(new n.Context2DDriver(a,e.width,e.height));g.MaximumMagnutide=(g.Maximum-g.Minimum)/4,g.Minimum=h[t-1].v1,g.Maximum=h[t-1].v2,g.TargetMinimum=s[t-1].v1,g.TargetMaximum=s[t-1].v2,g.CenterValue=l[t-1],g.Value=100,g.Label=u[t-1],r.push(g)}new a.default(50,(()=>{r.forEach((i=>{let t=i.Value+2*(Math.random()-.5);t<i.Minimum+20&&(t+=(i.Maximum-i.Minimum)/2),t>i.Maximum-20&&(t-=(i.Maximum-i.Minimum)/2),i.Value=t}))}),!0)})()})();
//# sourceMappingURL=bundle.js.map